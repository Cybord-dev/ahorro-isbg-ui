<div class="animated fadeIn">
  <div class="row">
    <div class="col-sm-12 col-md-12">
      <div class="card">
        <div class="card-header">
          <strong>Reportes prestamos sistema de caja</strong>
        </div>
        <div class="card-body">
          

            <div class="col">
              <div class="row slide_1">
                <div class="col-md-1">
                  <label for="idSolicitud" class="label"><strong>Solicitud</strong></label>
                  <input type="text" class="form-control" fullWidth id="idSolicitud" [(ngModel)]="filterParams.idSolicitud"
                    placeholder="No Solicitud">
                </div>

                <div class="col-md-2">
                  <label for="noempleado" class="label"><strong>No. Empleado</strong></label>
                  <input type="text" class="form-control" fullWidth id="noemp" [(ngModel)]="filterParams.noEmpleado"
                    placeholder="No. Empleado">
                </div>
    
                <div class="col-md-2">
                  <label for="nombre" class="label"> <strong>Nombre del Empleado</strong></label>
                  <input type="text" class="form-control" fullWidth id="noemp" [(ngModel)]="filterParams.nombre"
                    placeholder="Nombre empleado">
                </div>
    
                <div class="col-md-1">
                  <label for="tipousu" class="label"> <strong>Tipo Usuario</strong></label>
                    <select id="tipousu" class="form-control" style="display:block;" [(ngModel)]="filterParams.tipoUsuario">
                      <option value="*">Todos</option>
                      <option value="INTERNO">INTERNO</option>
                      <option value="EXTERNO">EXTERNO</option>
                    </select>
                </div>
                
                <div class="col-md-4">
                  <label for="fechacre" class="label"><strong>Periodo de Creación</strong></label>
                  <div class="form-group">
                    <input type="text" placeholder="Fecha de creación" class="form-control" 
                      bsDaterangepicker [maxDate]="maxDate"
                      [(ngModel)]="fechaCreacion">
                  </div>
    
                </div>

                <div class="col-md-2">
                  <label for="inputActivo" class="label"><strong>Estatus</strong></label>
                  <select id="inputActivo" class="form-control" style="display:block;" [(ngModel)]="filterParams.tipo">
                    <option value="*">Todos</option>
                    <option value="SOLICITADO">Solicitado</option>
                    <option value="PROCESO_DE_APROBACION">Proceso de aprobacion</option>
                    <option value="ACTIVO">Activo</option>
                    <option value="SUSPENDIDO">Suspendido</option>
                    <option value="TERMINADO">Terminado</option>
                    <option value="A_PAGAR_POR_AVAL">A pagar por aval</option>
                    <option value="TRASPASADO">Traspasado</option>
                    <option value="TRASPASADO_TERMINADOO">Traspasadoo terminado</option>
                  </select>
                </div>

              </div>
            </div>
            <div class="col">
              <div class="row">
                <div class="col">
                </div>
                <div class="col-2">
                  <button class="btn btn-primary" [disabled]="loading" (click)="updateDataTable(0,10)"
                    style="margin-top: 2em;">BUSCAR
                    <i class="fa fa-spinner fa-spin" *ngIf="loading"></i></button>
                </div>
                <div class="col">
                </div>
              </div>
            </div>
        </div>

      </div>
    </div>
    <!--/.col-->
  </div>
  <!--/.row-->


  <div class="row">
    <div class="col-sm-12 col-md-12">
      <div class="card">
        <div class="card-header">
          <strong>Resultados</strong>
        </div>
        <div class="card-body">
          <div class="row">
            <div class="col">

              <div *ngIf="page.empty === true" class="alert alert-primary" role="alert">
                No se encontraron resultados
              </div>
              <div class="clearfix" *ngIf="page.empty === false">
                <button class="btn-sm btn-success float-right" (click)="downloadXLSFile()"><i
                    class="fa fa-file-excel-o fa-sm"></i></button>
                <select id="inputunidad" style="display:block;width: 95px; margin-right: 15px;"
                  class="float-right form-control form-control-sm" [(ngModel)]="filterParams.size"
                  *ngIf="page.last==false || page.first==true" (change)="onChangePageSize($event.target.value)">
                  <option value="10">10</option>
                  <option *ngIf="page.number<(page.totalElements/20)" value="20">20</option>
                  <option *ngIf="page.number<(page.totalElements/50)" value="50">50</option>
                </select>
                <strong class="float-right"> Tamaño Pagina &nbsp;&nbsp;&nbsp;&nbsp;</strong>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col">

              <div class="table-responsive" *ngIf="page.empty == false">
                <table class="table table-bordered table-sm">
                  <thead class="thead-dark">
                    <tr>
                      <th class="text-center" *ngIf="module === 'contabilidad' || module === 'recursos-humanos' ">DETALLES</th>
                      <th class="text-center">ID SOLICITUD</th>
                      <th class="text-center">TIPO USUARIO</th>
                      <th class="text-center">NO EMPLEADO</th>
                      <th class="text-center">NOMBRE</th>
                      <th class="text-center">TIPO</th>
                      <th class="text-center">TASA</th>
                      <th class="text-center">NO QUINCENAS</th>
                      <th class="text-center">MONTO PRESTAMO</th>
                      <th class="text-center">INTERES TOTAL</th>
                      <th class="text-center">MONTO PAGOS</th>
                      <th class="text-center">MONTO INTERES</th>
                      <th class="text-center">MONTO AJUSTES</th>
                      <th class="text-center">SALDO PENDIENTE</th>
                      <th class="text-center">TOTAL PAGADO</th>
                      <th class="text-center">CREACION</th>
                      <th class="text-center">ACTUALIZACION</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let fila of page.content">
                      <td scope="row" class="text-center" *ngIf="module === 'contabilidad' || module === 'recursos-humanos' ">
                        <button class="btn-sm btn-success" (click)="detallePrestamos(fila.idUsuario)"><i
                          class="fa fa-credit-card fa-sm"></i></button>
                      </td>
                      <td scope="row">{{fila.idSolicitud}}</td>
                      <td scope="row">{{fila.tipoUsuario}}</td>
                      <td scope="row">{{fila.noEmpleado}}</td>
                      <td scope="row">{{fila.nombre}}</td>
                      <td scope="row">{{fila.tipo}}</td>
                      <td scope="row">{{fila.tasaInteres / 100 | percent}}</td>
                      <td scope="row">{{fila.noQuincenas}}</td>
                      
                      <td scope="row" class="text-right">{{fila.montoPrestamo | currency}}</td>
                      <td scope="row" class="text-right">{{fila.interesPrestamo | currency}}</td>
                      <td scope="row" class="text-right">{{fila.pagos | currency}}</td>
                      <td scope="row" class="text-right">{{fila.interes | currency}}</td>
                      <td scope="row" class="text-right">{{fila.ajuste | currency}}</td>
                      <td scope="row" class="text-right">{{fila.saldoPendiente | currency}}</td>
                      <td scope="row" class="text-right">{{fila.totalPagado | currency}}</td>
                      <td scope="row">{{fila.fechaCreacion | date:
                        'dd-MM-yyyy' }}</td>
                      <td scope="row">{{fila.fechaActualizacion| date:
                        'dd-MM-yyyy HH:mm'}}</td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <div class="clearfix" *ngIf="page.empty == false">
                <ul class="pagination float-right" *ngIf="page.totalElements > 1">
                  <li class="page-item" *ngIf="page.first==false"><button class="btn page-link"
                      (click)="updateDataTable(0,page.size)"><i class="icon-control-rewind icons"></i></button>
                  </li>
                  <li class="page-item" *ngIf="page.first==false"><button class="btn page-link"
                      (click)="updateDataTable(page.number-1,page.size)">{{page.number}}</button></li>
                  <li class="page-item active"><a class="page-link"><strong>{{page.number+1}}</strong></a></li>
                  <li class="page-item" *ngIf="page.last==false"><button class="btn page-link"
                      (click)="updateDataTable(page.number+1,page.size)">{{page.number+2}}</button></li>
                  <li class="page-item" *ngIf="page.last==false"><button class="btn page-link"
                      (click)="updateDataTable(page.totalPages-1,page.size)"><i
                        class="icon-control-forward icons"></i></button>
                  </li>
                </ul>
              </div>
            </div>
          </div>

        </div>
        <cybord-loader *ngIf="loading"></cybord-loader>
      </div>
    </div>
    <!--/.col-->
  </div>
  <!--/.row-->
</div>


<!--div bsModal #modalConfirmacion="bs-modal" class="modal fade modal-info"
  id="modalConfirmacion" tabindex="-1"
  role="dialog" aria-labelledby="modalConfirmacion" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modalConfirmacionLabel">Confirmacion</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="salir()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
          <img class="card-img-top" [src]="comprobanteUrl" style="height: 300px;width: 470px;"  alt="Card image cap" *ngIf = "comprobanteUrl!== undefined">
          <h5 class="card-header" *ngIf = "comprobanteUrl === undefined" class="text-danger" >SIN COMPROBANTE DE PAGO</h5>
        
        
          <table class="table table-bordered table-sm">

            <tbody>
              <tr>
                <th>No empleado</th>
                <td scope="row" class="text-left">{{saldo.noEmpleado}}</td>
              </tr>
              <tr>
                <th>Nombre</th>
                <td scope="row" class="text-left">{{saldo.nombreEmpleado}}</td>
              </tr>
              <tr>
                <th>Tipo</th>
                <td scope="row" class="text-left">{{saldo.tipo}}</td>
              </tr>
              <tr>
                <th>Estatus prestamo</th>
                <td scope="row" class="text-left">{{saldo.estatus}}</td>
              </tr>
              <tr>
                <th>Monto Pago</th>
                <td scope="row" class="text-left">{{saldo.monto | currency}} de {{saldo.montoPrestamo}}</td>
              </tr>
              <tr>
                <th>Tasa de interes</th>
                <td scope="row" class="text-left">{{saldo.tasaInteres / 100 | percent}}</td>
              </tr>
              <tr>
                <th>Observaciones</th>
                <td scope="row" class="text-left">{{saldo.observaciones}}</td>
              </tr>
              <tr>
                <th>Ultima modificacion</th>
                <td scope="row" class="text-left">{{saldo.origen}}</td>
              </tr>
              <tr>
                <th>No. Quincenas</th>
                <td scope="row" class="text-left">{{saldo.noQuincenas}}</td>
              </tr>
              
            </tbody>
          </table>
        
        

        <p> <strong>{{usuario.nombre}} aprobará</strong> el pago al prestamo.</p>
        <p>Al <strong>APROBAR</strong> el pago, el sistema registra la persona y el momento en que realiza la transacción.</p>


        <form>
          <div class="form-group row">
            <label for="inputPassword" class="col-sm-2 col-form-label">No empleado</label>
            <div class="col-sm-10">
              <input type="password" class="form-control" id="inputPassword" [(ngModel)]="noEmpleado"
                [ngModelOptions]="{standalone: true}">
              <small id="noEmpHelp" class="form-text text-muted">Ingresa tu numero de empleado para desbloquear.</small>
            </div>
          </div>
        </form>

      <div class="alert alert-info" *ngIf="message.length > 0" role="alert">
          <p>{{message}}</p>
      </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-success" *ngIf="comprobanteUrl!== undefined" (click)="downloadImage()">Descargar comprobante</button>
        <button type="button" class="btn"
          [ngClass]="{'btn-primary': noEmpleado === usuario.noEmpleado && !saldo.validado , 'btn-secondary' : noEmpleado !== usuario.noEmpleado || saldo.validado }"
          [disabled]="noEmpleado !== usuario.noEmpleado" (click)="aprobarPago()">Aprobar Pago</button>
        <button type="button" class="btn btn-warning" (click)="salir()">Salir</button>
      </div>
    </div>
  </div>
</div-->